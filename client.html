<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Client Stream</title>
  <style>body { font-family: sans-serif; text-align: center; }</style>
</head>
<body>
  <h1>ðŸŽ¥ Client Stream</h1>
  <p>Nháº­p chuá»—i káº¿t ná»‘i Ä‘á»ƒ xem stream:</p>
  <textarea id="offerStringInput" rows="4" style="width: 80%; padding: 10px; font-size: 16px;"></textarea>
  <button onclick="connectStream()">Káº¿t ná»‘i vÃ  xem stream</button>
  
  <br><br>
  <video id="video" width="600" controls autoplay></video>

  <script>
    const pc = new RTCPeerConnection();

    // HÃ m káº¿t ná»‘i vÃ  xem stream
    function connectStream() {
      const offerString = document.getElementById('offerStringInput').value;

      if (!offerString) {
        alert("Vui lÃ²ng nháº­p chuá»—i káº¿t ná»‘i!");
        return;
      }

      try {
        // Parse chuá»—i JSON vÃ  thiáº¿t láº­p RemoteDescription
        const offer = JSON.parse(offerString);
        
        // Khi nháº­n track, gÃ¡n stream vÃ o video
        pc.ontrack = (event) => {
          document.getElementById('video').srcObject = event.streams[0];
        };

        pc.setRemoteDescription(offer).then(() => {
          console.log("Káº¿t ná»‘i thÃ nh cÃ´ng vÃ  Ä‘ang stream...");
        });
      } catch (error) {
        alert("Lá»—i khi káº¿t ná»‘i: " + error);
      }
    }
  </script>
</body>
</html>
