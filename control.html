<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Controller</title>
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
  <h1>ğŸ“² Äiá»u khiá»ƒn</h1>
  <div id="status">â³ Äang káº¿t ná»‘i...</div>
  <br/>

  <video id="remoteVideo" autoplay playsinline style="width: 100%; max-height: 80vh;"></video>

  <script>
    const peerId = new URLSearchParams(location.search).get("peerId");
    const peer = new Peer({ /* giá»¯ nguyÃªn config */ });
  
    let conn;
  
    peer.on('open', () => {
  // Káº¿t ná»‘i dá»¯ liá»‡u nhÆ° trÆ°á»›c
  conn = peer.connect(peerId);
  conn.on('open', () => {
    document.getElementById('status').innerText = "âœ… ÄÃ£ káº¿t ná»‘i dá»¯ liá»‡u!";
  });

  conn.on('error', err => {
    document.getElementById('status').innerText = "âŒ Lá»—i káº¿t ná»‘i!";
  });

  // Gá»i Ä‘á»ƒ nháº­n stream
  const call = peer.call(peerId, null); // Gá»­i null => trigger bÃªn kia gá»i getDisplayMedia
  call.on('stream', remoteStream => {
    document.getElementById('remoteVideo').srcObject = remoteStream;
  });
});

  
    function send(action) {
      if (conn && conn.open) {
        conn.send({ action });
      }
    }
  </script>
</body>
</html>
